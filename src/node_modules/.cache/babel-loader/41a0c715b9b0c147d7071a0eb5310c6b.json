{"ast":null,"code":"import { verifyTokens } from \"../../../auths/verifyTokens\";\nimport { backendURL } from \"../../../../backendURL\";\nexport const get_categories = async (success, fail, access, set_access) => {\n  const success_Status = async (status, access_token) => {\n    if (status === 200) {\n      // fetching cashflow data\n      const response = await fetch(`${backendURL}/backend_Ledger/category/`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'Application/JSON',\n          'Authorization': `Bearer ${access_token}`\n        }\n      });\n      const text = await response.text();\n\n      if (response.status === 401) {\n        // console.log(\"accesstoken not valid\");\n        alert(\"you are not authorized to view this page\");\n        window.location.assign(\"/login\");\n        return [];\n      }\n\n      if (response.status === 200) {\n        // console.log(\"success\", JSON.parse(text));\n        success(JSON.parse(text));\n      } else {\n        // console.log(\"failed\", text);\n        Object.entries(JSON.parse(text)).forEach(_ref => {\n          let [key, value] = _ref;\n          fail(`${key}: ${value}`);\n        });\n      }\n    }\n  };\n\n  verifyTokens(access, set_access, success_Status);\n  success_Status();\n};\nexport const create_categories = async (newCategory, success, access, set_access) => {\n  const success_Status = async (status, access_token) => {\n    if (status === 200) {\n      // creating cashflow data\n      const response = await fetch(`${backendURL}/backend_Ledger/category/`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${access_token}`\n        },\n        body: JSON.stringify({\n          \"name\": newCategory\n        })\n      });\n      const text = await response.text();\n\n      if (response.status === 401) {\n        // console.log(\"accesstoken not valid\");\n        alert(\"you are not authorized to delete this data\");\n        return [];\n      }\n\n      if (response.status === 201) {\n        // console.log(\"data created\", text);\n        success();\n      } else {// console.log(\"failed to delete\", text);\n      }\n    }\n  };\n\n  verifyTokens(access, set_access, success_Status);\n  success_Status();\n}; // export const delete_categories = async (flowId, success, access, set_access) => {\n//   const success_Status = async(status, access_token) => {\n//     if (status  === 200){\n//       // fetching cashflow data\n//       const response = await fetch(\n//         `${backendURL}/backend_Ledger/cashflow/${flowId}/delete/`,\n//         {\n//             method: 'DELETE',\n//             headers: {\n//                 'Content-Type': 'Application/JSON',\n//                 'Authorization': `Bearer ${access_token}`,\n//             }\n//         }\n//     );\n//   const text = await response.text();\n//   if (response.status === 401) {\n//     console.log(\"accesstoken not valid\");\n//     alert(\"you are not authorized to delete this data\")\n//     return [];\n//   }\n//   if (response.status === 204) {\n//     console.log(\"deleted\", text);\n//     success()\n//   } else {\n//     console.log(\"failed to delete\", text);\n//   }\n//     }\n//   }\n//   verifyTokens(access, set_access, success_Status)\n//   success_Status()\n// };","map":{"version":3,"names":["verifyTokens","backendURL","get_categories","success","fail","access","set_access","success_Status","status","access_token","response","fetch","method","headers","text","alert","window","location","assign","JSON","parse","Object","entries","forEach","key","value","create_categories","newCategory","body","stringify"],"sources":["/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/src/features/ledger/components/api/categories_api.js"],"sourcesContent":["import {verifyTokens} from \"../../../auths/verifyTokens\"\nimport {backendURL} from \"../../../../backendURL\"\n\n\nexport const get_categories = async ( success, fail, access, set_access) => {\n  \n  const success_Status = async(status, access_token) => {\n    if (status  === 200){\n      // fetching cashflow data\n      const response = await fetch(\n        `${backendURL}/backend_Ledger/category/`,\n        {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'Application/JSON',\n                'Authorization': `Bearer ${access_token}`,\n            }\n        }\n      );\n      const text = await response.text();\n      if (response.status === 401) {\n        // console.log(\"accesstoken not valid\");\n        alert(\"you are not authorized to view this page\")\n        window.location.assign(\"/login\");\n        return [];\n      }\n      if (response.status === 200) {\n        // console.log(\"success\", JSON.parse(text));\n        success(JSON.parse(text));\n      } else {\n        // console.log(\"failed\", text);\n        Object.entries(JSON.parse(text)).forEach(([key, value])=>{\n        fail(`${key}: ${value}`);\n      });\n      }\n    }\n  }\n\n  verifyTokens(access, set_access, success_Status)\n  \n  success_Status()\n};\n\nexport const create_categories = async (newCategory, success, access, set_access) => {\n  \n  const success_Status = async(status, access_token) => {\n    if (status  === 200){\n      // creating cashflow data\n      const response = await fetch(\n        `${backendURL}/backend_Ledger/category/`,\n        {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${access_token}`,\n          },\n          body: JSON.stringify({\n            \"name\": newCategory,\n          }),\n        }\n      );\n\n      const text = await response.text();\n      if (response.status === 401) {\n        // console.log(\"accesstoken not valid\");\n        alert(\"you are not authorized to delete this data\")\n        return [];\n      }\n      if (response.status === 201) {\n        // console.log(\"data created\", text);\n        success()\n      } else {\n        // console.log(\"failed to delete\", text);\n      }\n    }\n  }\n\n  verifyTokens(access, set_access, success_Status)\n  \n  success_Status()\n};\n\n// export const delete_categories = async (flowId, success, access, set_access) => {\n  \n//   const success_Status = async(status, access_token) => {\n//     if (status  === 200){\n//       // fetching cashflow data\n//       const response = await fetch(\n//         `${backendURL}/backend_Ledger/cashflow/${flowId}/delete/`,\n//         {\n//             method: 'DELETE',\n//             headers: {\n//                 'Content-Type': 'Application/JSON',\n//                 'Authorization': `Bearer ${access_token}`,\n//             }\n//         }\n//     );\n//   const text = await response.text();\n//   if (response.status === 401) {\n//     console.log(\"accesstoken not valid\");\n//     alert(\"you are not authorized to delete this data\")\n//     return [];\n//   }\n//   if (response.status === 204) {\n//     console.log(\"deleted\", text);\n//     success()\n//   } else {\n//     console.log(\"failed to delete\", text);\n//   }\n//     }\n//   }\n\n//   verifyTokens(access, set_access, success_Status)\n  \n//   success_Status()\n// };\n\n"],"mappings":"AAAA,SAAQA,YAAR,QAA2B,6BAA3B;AACA,SAAQC,UAAR,QAAyB,wBAAzB;AAGA,OAAO,MAAMC,cAAc,GAAG,OAAQC,OAAR,EAAiBC,IAAjB,EAAuBC,MAAvB,EAA+BC,UAA/B,KAA8C;EAE1E,MAAMC,cAAc,GAAG,OAAMC,MAAN,EAAcC,YAAd,KAA+B;IACpD,IAAID,MAAM,KAAM,GAAhB,EAAoB;MAClB;MACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEV,UAAW,2BADY,EAE1B;QACIW,MAAM,EAAE,KADZ;QAEIC,OAAO,EAAE;UACL,gBAAgB,kBADX;UAEL,iBAAkB,UAASJ,YAAa;QAFnC;MAFb,CAF0B,CAA5B;MAUA,MAAMK,IAAI,GAAG,MAAMJ,QAAQ,CAACI,IAAT,EAAnB;;MACA,IAAIJ,QAAQ,CAACF,MAAT,KAAoB,GAAxB,EAA6B;QAC3B;QACAO,KAAK,CAAC,0CAAD,CAAL;QACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,QAAvB;QACA,OAAO,EAAP;MACD;;MACD,IAAIR,QAAQ,CAACF,MAAT,KAAoB,GAAxB,EAA6B;QAC3B;QACAL,OAAO,CAACgB,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAD,CAAP;MACD,CAHD,MAGO;QACL;QACAO,MAAM,CAACC,OAAP,CAAeH,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAf,EAAiCS,OAAjC,CAAyC,QAAgB;UAAA,IAAf,CAACC,GAAD,EAAMC,KAAN,CAAe;UACzDrB,IAAI,CAAE,GAAEoB,GAAI,KAAIC,KAAM,EAAlB,CAAJ;QACD,CAFC;MAGD;IACF;EACF,CA9BD;;EAgCAzB,YAAY,CAACK,MAAD,EAASC,UAAT,EAAqBC,cAArB,CAAZ;EAEAA,cAAc;AACf,CArCM;AAuCP,OAAO,MAAMmB,iBAAiB,GAAG,OAAOC,WAAP,EAAoBxB,OAApB,EAA6BE,MAA7B,EAAqCC,UAArC,KAAoD;EAEnF,MAAMC,cAAc,GAAG,OAAMC,MAAN,EAAcC,YAAd,KAA+B;IACpD,IAAID,MAAM,KAAM,GAAhB,EAAoB;MAClB;MACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEV,UAAW,2BADY,EAE1B;QACEW,MAAM,EAAE,MADV;QAEEC,OAAO,EAAE;UACP,UAAU,kBADH;UAEP,gBAAgB,kBAFT;UAGP,iBAAkB,UAASJ,YAAa;QAHjC,CAFX;QAOEmB,IAAI,EAAET,IAAI,CAACU,SAAL,CAAe;UACnB,QAAQF;QADW,CAAf;MAPR,CAF0B,CAA5B;MAeA,MAAMb,IAAI,GAAG,MAAMJ,QAAQ,CAACI,IAAT,EAAnB;;MACA,IAAIJ,QAAQ,CAACF,MAAT,KAAoB,GAAxB,EAA6B;QAC3B;QACAO,KAAK,CAAC,4CAAD,CAAL;QACA,OAAO,EAAP;MACD;;MACD,IAAIL,QAAQ,CAACF,MAAT,KAAoB,GAAxB,EAA6B;QAC3B;QACAL,OAAO;MACR,CAHD,MAGO,CACL;MACD;IACF;EACF,CA/BD;;EAiCAH,YAAY,CAACK,MAAD,EAASC,UAAT,EAAqBC,cAArB,CAAZ;EAEAA,cAAc;AACf,CAtCM,C,CAwCP;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA"},"metadata":{},"sourceType":"module"}