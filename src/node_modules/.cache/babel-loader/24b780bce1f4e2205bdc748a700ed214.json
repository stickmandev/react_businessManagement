{"ast":null,"code":"import { backendURL } from \"../../backendURL\";\nexport const verifyTokens = async access => {\n  const refreshtoken = localStorage.getItem(\"refreshToken\");\n  console.log(\"verifying tokens......\");\n  console.log(access); // console.log(refreshtoken)\n  // Verifying access token___________________________________________________________________________________\n\n  console.log(\"verifying access token......\");\n  const verify_access_token = await fetch(`${backendURL}/user/verifyAccess/`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'Application/JSON',\n      'Content-Type': 'Application/json'\n    },\n    body: JSON.stringify({\n      \"token\": access\n    })\n  });\n  console.log(\"finished verifying access token\"); // if (verify_access_token.status === (401||400) ) {\n  //     console.log(\"access token expired......\")\n  //     // fetching new access and refresh token___________________________________________________________________________________\n  //     console.log(\"fetching new access and refresh token......\")\n  //     const get_access_token = await fetch(\n  //         `${backendURL}/user/refresh/`,\n  //         {\n  //             method: 'POST',\n  //             headers: {\n  //                 'Accept': 'Application/JSON',\n  //                 'Content-Type': 'Application/json',\n  //             },\n  //             body: JSON.stringify({\n  //             \"refresh\": refreshtoken,\n  //             })\n  //         }\n  //     );\n  //     console.log('finished fetching access and refresh token')\n  //     console.log(verify_access_token.refresh)\n  //     console.log(\"setting access and refresh token\")\n  //     if (get_access_token.status === 200) {\n  //         await localStorage.setItem(\"refreshToken\", verify_access_token.refresh);\n  //         const access = verify_access_token.access\n  //         console.log('finished setting tokens')\n  //     }\n  //     if (get_access_token.status === (401||400)) {\n  //         // Verifying refresh token__________________________________________________________________________________\n  //         console.log('Verifying refresh token....')\n  //         const verify_refresh_token = await fetch(\n  //         `${backendURL}/user/verifyRefresh/`,\n  //         {\n  //             method: 'POST',\n  //             headers: {\n  //                 'Accept': 'Application/JSON',\n  //                 'Content-Type': 'application/json',\n  //             },\n  //             body: JSON.stringify({\n  //             \"token\": refreshtoken,\n  //             })\n  //         }\n  //         );\n  //         console.log('finished verifying refresh token')\n  //         if (verify_refresh_token.status === (401||400)) {\n  //             alert(\"session expired, please log in again\")\n  //             console.log('redirecting to login')\n  //             window.location.assign(\"/login\");\n  //         }\n  //   }\n  // };\n};","map":{"version":3,"names":["backendURL","verifyTokens","access","refreshtoken","localStorage","getItem","console","log","verify_access_token","fetch","method","headers","body","JSON","stringify"],"sources":["/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/src/features/auths/verifyTokens.js"],"sourcesContent":["import {backendURL} from \"../../backendURL\"\n\nexport const verifyTokens = async (access) => {\n    \n    const refreshtoken =  localStorage.getItem(\"refreshToken\");\n    console.log(\"verifying tokens......\")\n    console.log(access)\n    // console.log(refreshtoken)\n    \n    // Verifying access token___________________________________________________________________________________\n    console.log(\"verifying access token......\")\n    const verify_access_token = await fetch(\n      `${backendURL}/user/verifyAccess/`,\n      {\n          method: 'POST',\n          headers: {\n              'Accept': 'Application/JSON',\n              'Content-Type': 'Application/json',\n          },\n          body: JSON.stringify({\"token\": access })\n      }\n    );\n    console.log(\"finished verifying access token\")\n  \n    // if (verify_access_token.status === (401||400) ) {\n    //     console.log(\"access token expired......\")\n\n    //     // fetching new access and refresh token___________________________________________________________________________________\n    //     console.log(\"fetching new access and refresh token......\")\n    //     const get_access_token = await fetch(\n    //         `${backendURL}/user/refresh/`,\n    //         {\n    //             method: 'POST',\n    //             headers: {\n    //                 'Accept': 'Application/JSON',\n    //                 'Content-Type': 'Application/json',\n    //             },\n    //             body: JSON.stringify({\n    //             \"refresh\": refreshtoken,\n    //             })\n    //         }\n    //     );\n    //     console.log('finished fetching access and refresh token')\n\n    //     console.log(verify_access_token.refresh)\n    //     console.log(\"setting access and refresh token\")\n    //     if (get_access_token.status === 200) {\n    //         await localStorage.setItem(\"refreshToken\", verify_access_token.refresh);\n    //         const access = verify_access_token.access\n    //         console.log('finished setting tokens')\n    //     }\n\n    //     if (get_access_token.status === (401||400)) {\n    //         // Verifying refresh token__________________________________________________________________________________\n    //         console.log('Verifying refresh token....')\n    //         const verify_refresh_token = await fetch(\n    //         `${backendURL}/user/verifyRefresh/`,\n    //         {\n    //             method: 'POST',\n    //             headers: {\n    //                 'Accept': 'Application/JSON',\n    //                 'Content-Type': 'application/json',\n    //             },\n    //             body: JSON.stringify({\n    //             \"token\": refreshtoken,\n    //             })\n    //         }\n    //         );\n    //         console.log('finished verifying refresh token')\n            \n        \n    //         if (verify_refresh_token.status === (401||400)) {\n    //             alert(\"session expired, please log in again\")\n    //             console.log('redirecting to login')\n    //             window.location.assign(\"/login\");\n    //         }\n\n    //   }\n  \n    // };\n    \n    \n}\n"],"mappings":"AAAA,SAAQA,UAAR,QAAyB,kBAAzB;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAOC,MAAP,IAAkB;EAE1C,MAAMC,YAAY,GAAIC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAtB;EACAC,OAAO,CAACC,GAAR,CAAY,wBAAZ;EACAD,OAAO,CAACC,GAAR,CAAYL,MAAZ,EAJ0C,CAK1C;EAEA;;EACAI,OAAO,CAACC,GAAR,CAAY,8BAAZ;EACA,MAAMC,mBAAmB,GAAG,MAAMC,KAAK,CACpC,GAAET,UAAW,qBADuB,EAErC;IACIU,MAAM,EAAE,MADZ;IAEIC,OAAO,EAAE;MACL,UAAU,kBADL;MAEL,gBAAgB;IAFX,CAFb;IAMIC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAC,SAASZ;IAAV,CAAf;EANV,CAFqC,CAAvC;EAWAI,OAAO,CAACC,GAAR,CAAY,iCAAZ,EApB0C,CAsB1C;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAGA;EACA;EACA;EACA;EACA;EAEA;EAEA;AAGH,CAhFM"},"metadata":{},"sourceType":"module"}