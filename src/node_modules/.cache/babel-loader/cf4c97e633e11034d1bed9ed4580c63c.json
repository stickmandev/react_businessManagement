{"ast":null,"code":"import _regeneratorRuntime from\"/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _asyncToGenerator from\"/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{verifyTokens}from\"../../../auths/verifyTokens\";import{backendURL}from\"../../../../backendURL\";// `${backendURL}/backend_Ledger/cashflow/ratios/weekly?start_date=${start_date}&end_date=${end_date}&date_range=${date_range}`,\nexport var get_ratioApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(success,fail,ratioPeriodInterval,ratioDateFrom,ratioDateTo,ratioPeriod,access,set_access){var success_Status;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(start_date+\"-----To------\"+end_date)\n// console.log(filterCategory)\nconsole.log(ratioPeriod);console.log(ratioDateFrom);success_Status=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(status,access_token){var response,text;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(status===200)){_context.next=12;break;}_context.next=3;return fetch(\"\".concat(backendURL,\"/backend_Ledger/cashflow/ratios/\").concat(ratioPeriodInterval,\"?start_date=\").concat(ratioDateFrom,\"&end_date=\").concat(ratioDateTo,\"&date_range=\").concat(ratioPeriod),{method:'GET',headers:{'Content-Type':'Application/JSON','Authorization':\"Bearer \".concat(access_token)}});case 3:response=_context.sent;_context.next=6;return response.text();case 6:text=_context.sent;if(!(response.status===401)){_context.next=11;break;}// console.log(\"accesstoken not valid\");\nalert(\"you are not authorized to view this page\");window.location.assign(\"/login\");return _context.abrupt(\"return\",[]);case 11:if(response.status===200){// console.log(\"success\", JSON.parse(text));\n// console.log('successfuly fetched cashflow data')\nsuccess(JSON.parse(text));}else{// console.log(\"failed\", text);\nObject.entries(JSON.parse(text)).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];fail(\"\".concat(key,\": \").concat(value));// console.log('faillllled')\n});}case 12:case\"end\":return _context.stop();}}},_callee);}));return function success_Status(_x9,_x10){return _ref2.apply(this,arguments);};}();verifyTokens(access,set_access,success_Status);success_Status();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function get_ratioApi(_x,_x2,_x3,_x4,_x5,_x6,_x7,_x8){return _ref.apply(this,arguments);};}();","map":{"version":3,"names":["verifyTokens","backendURL","get_ratioApi","success","fail","ratioPeriodInterval","ratioDateFrom","ratioDateTo","ratioPeriod","access","set_access","console","log","success_Status","status","access_token","fetch","method","headers","response","text","alert","window","location","assign","JSON","parse","Object","entries","forEach","key","value"],"sources":["/home/gcg/Desktop/Programing /python/Django main projects/projects/businessManagement/react_BusinessManagement/src/features/ledger/components/api/ratios_api.js"],"sourcesContent":["import {verifyTokens} from \"../../../auths/verifyTokens\"\nimport {backendURL} from \"../../../../backendURL\"\n// `${backendURL}/backend_Ledger/cashflow/ratios/weekly?start_date=${start_date}&end_date=${end_date}&date_range=${date_range}`,\n\n\nexport const get_ratioApi = async ( success, fail, ratioPeriodInterval, ratioDateFrom, ratioDateTo, ratioPeriod, access, set_access) => {\n    \n    // console.log(start_date+\"-----To------\"+end_date)\n    // console.log(filterCategory)\n    console.log(ratioPeriod)\n    console.log(ratioDateFrom)\n\n    const success_Status = async(status, access_token) => {\n    if (status  === 200){\n      \n      // console.log('fetching cashflow data')\n      // fetching cashflow data\n      const response = await fetch(\n        `${backendURL}/backend_Ledger/cashflow/ratios/${ratioPeriodInterval}?start_date=${ratioDateFrom}&end_date=${ratioDateTo}&date_range=${ratioPeriod}`,\n        {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'Application/JSON',\n                'Authorization': `Bearer ${access_token}`,\n            }\n        }\n      );\n      const text = await response.text();\n      if (response.status === 401) {\n        // console.log(\"accesstoken not valid\");\n        alert(\"you are not authorized to view this page\")\n        window.location.assign(\"/login\");\n        return [];\n      }\n      if (response.status === 200) {\n        // console.log(\"success\", JSON.parse(text));\n        // console.log('successfuly fetched cashflow data')\n        success(JSON.parse(text));\n      } else {\n        // console.log(\"failed\", text);\n        Object.entries(JSON.parse(text)).forEach(([key, value])=>{\n          fail(`${key}: ${value}`);\n          // console.log('faillllled')\n        });\n      }\n    }\n  }\n\n  verifyTokens(access, set_access, success_Status)\n  \n  success_Status()\n};\n\n"],"mappings":"4lBAAA,OAAQA,YAAR,KAA2B,6BAA3B,CACA,OAAQC,UAAR,KAAyB,wBAAzB,CACA;AAGA,MAAO,IAAMC,aAAY,4FAAG,kBAAQC,OAAR,CAAiBC,IAAjB,CAAuBC,mBAAvB,CAA4CC,aAA5C,CAA2DC,WAA3D,CAAwEC,WAAxE,CAAqFC,MAArF,CAA6FC,UAA7F,2IAExB;AACA;AACAC,OAAO,CAACC,GAAR,CAAYJ,WAAZ,EACAG,OAAO,CAACC,GAAR,CAAYN,aAAZ,EAEMO,cAPkB,6FAOD,iBAAMC,MAAN,CAAcC,YAAd,2IACnBD,MAAM,GAAM,GADO,iDAKEE,MAAK,WACvBf,UADuB,4CACsBI,mBADtB,wBACwDC,aADxD,sBACkFC,WADlF,wBAC4GC,WAD5G,EAE1B,CACIS,MAAM,CAAE,KADZ,CAEIC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,iCAA2BH,YAA3B,CAFK,CAFb,CAF0B,CALP,QAKfI,QALe,qCAeFA,SAAQ,CAACC,IAAT,EAfE,QAefA,IAfe,oBAgBjBD,QAAQ,CAACL,MAAT,GAAoB,GAhBH,2BAiBnB;AACAO,KAAK,CAAC,0CAAD,CAAL,CACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,QAAvB,EAnBmB,gCAoBZ,EApBY,UAsBrB,GAAIL,QAAQ,CAACL,MAAT,GAAoB,GAAxB,CAA6B,CAC3B;AACA;AACAX,OAAO,CAACsB,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAD,CAAP,CACD,CAJD,IAIO,CACL;AACAO,MAAM,CAACC,OAAP,CAAeH,IAAI,CAACC,KAAL,CAAWN,IAAX,CAAf,EAAiCS,OAAjC,CAAyC,eAAgB,mCAAdC,GAAc,UAATC,KAAS,UACvD3B,IAAI,WAAI0B,GAAJ,cAAYC,KAAZ,EAAJ,CACA;AACD,CAHD,EAID,CAhCoB,uDAPC,kBAOlBlB,eAPkB,oDA2C1Bb,YAAY,CAACS,MAAD,CAASC,UAAT,CAAqBG,cAArB,CAAZ,CAEAA,cAAc,GA7CY,wDAAH,kBAAZX,aAAY,wEAAlB"},"metadata":{},"sourceType":"module"}